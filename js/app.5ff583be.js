(function(){"use strict";var e={666:function(e,n,t){var o=t(5130),a=t(6768);const r=e=>((0,a.Qi)("data-v-3cdf739c"),e=e(),(0,a.jt)(),e),i={id:"app"},s={key:0,class:"spinner-border text-primary",role:"status"},l=r((()=>(0,a.Lk)("span",{class:"visually-hidden"},"Loading...",-1))),c=[l];function u(e,n,t,o,r,l){const u=(0,a.g2)("Header"),d=(0,a.g2)("GoogleMap"),p=(0,a.g2)("Footer");return(0,a.uX)(),(0,a.CE)("div",i,[(0,a.bF)(u),o.appLoaded?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.CE)("div",s,c)),o.appLoaded?((0,a.uX)(),(0,a.Wv)(d,{key:1,class:"map animated fadeIn"})):(0,a.Q3)("",!0),(0,a.bF)(p)])}var d=t(144);const p={id:"map",ref:"mapContainer",class:"map"};function v(e,n,t,o,r,i){return(0,a.uX)(),(0,a.CE)("div",p,null,512)}t(4114);var f=t(2266),g=t(578),m={name:"GoogleMap",setup(){const e=(0,d.KR)(null);let n=null,t=null,o=[],r=null;return(0,a.sV)((()=>{const a=new f.aH({apiKey:"AIzaSyCbNK-66CA8By6GQ6qC0bG5p_u-Wm8V1h0",version:"weekly"});a.load().then((()=>{const a=new google.maps.Map(e.value,{center:{lat:25.033,lng:121.5654},zoom:12});fetch("youbike_data.csv").then((e=>e.text())).then((e=>{const r=e.trim().split("\n").slice(1);r.forEach((e=>{const t=e.split(","),r=t[1],i=parseFloat(t[6]),s=parseFloat(t[7]),l=parseInt(t[3]),c=parseInt(t[2]),u=parseInt(t[13]),d=t[16];let p="./normal.ico";0===l?p="./no_bike.ico":l===c?p="./full.ico":0===u&&(p="./closed.ico");const v=new google.maps.Marker({position:{lat:i,lng:s},map:a,title:r,icon:{url:`/${p}`,scaledSize:new google.maps.Size(40,40)}}),f=`\n                                <div>\n                                    <p>租賃站點查詢: ${r}</p>\n                                    <p>站點位置: ${t[8]}</p>\n                                    <p>可借車輛: ${l}</p>\n                                    <p>可停空位: ${parseInt(t[12])}</p>\n                                    <p>時間: ${d}</p>\n                                </div>\n                            `,g=new google.maps.InfoWindow({content:f});v.addListener("click",(()=>{n&&n.close(),g.open(a,v),n=g})),o.push(v)})),t=new g.A(a,o,{minimumClusterSize:8,imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m"}),a.addListener("zoom_changed",(()=>{const e=a.getZoom();e<=12?t.setMaxZoom(12):t.setMaxZoom(null)}))})).catch((e=>{console.error("Error fetching CSV:",e)})),navigator.geolocation&&navigator.geolocation.getCurrentPosition((e=>{r={lat:e.coords.latitude,lng:e.coords.longitude},new google.maps.Marker({position:r,map:a,title:"Your Location",icon:{url:"./user_location.ico",scaledSize:new google.maps.Size(40,40)}}),a.setCenter(r);let t=null,i=1/0;if(o.forEach((e=>{const n=google.maps.geometry.spherical.computeDistanceBetween(new google.maps.LatLng(r.lat,r.lng),e.getPosition());n<i&&(i=n,t=e)})),t){const e=`\n                                    <div>\n                                        <p>最近的租賃站點: ${t.getTitle()}</p>\n                                        <p>距離: ${(i/1e3).toFixed(2)} 公里</p>\n                                    </div>\n                                `,o=new google.maps.InfoWindow({content:e});o.open(a,t),n=o}}),(e=>{console.error("Error getting user location:",e)}))}))})),{mapContainer:e}}},b=t(1241);const h=(0,b.A)(m,[["render",v],["__scopeId","data-v-1f52105a"]]);var k=h;const y=(0,a.Fv)('<div class="container" data-v-4fb00137><h1 data-v-4fb00137>YouBike 2.0 Recommendation System</h1><p data-v-4fb00137>Explore and find the best bike rental stations near you!</p><div class="status-types" data-v-4fb00137><div class="status" data-v-4fb00137><img src="normal.ico" alt="Normal" data-v-4fb00137> Normal Availability </div><div class="status" data-v-4fb00137><img src="no_bike.ico" alt="No Bikes" data-v-4fb00137> No Bikes Available </div><div class="status" data-v-4fb00137><img src="full.ico" alt="Full" data-v-4fb00137> Station Full </div><div class="status" data-v-4fb00137><img src="closed.ico" alt="Closed" data-v-4fb00137> Station Closed </div></div></div>',1),w=[y];function _(e,n,t,o,r,i){return(0,a.uX)(),(0,a.CE)("header",null,w)}var C={name:"HeaderSection"};const S=(0,b.A)(C,[["render",_],["__scopeId","data-v-4fb00137"]]);var x=S;const E=e=>((0,a.Qi)("data-v-14784299"),e=e(),(0,a.jt)(),e),F=E((()=>(0,a.Lk)("div",{class:"container"},[(0,a.Lk)("p",null,"© 2024 YouBike 2.0 Recommendation System. All rights reserved.")],-1))),I=[F];function L(e,n,t,o,r,i){return(0,a.uX)(),(0,a.CE)("footer",null,I)}var A={name:"FooterSection"};const O=(0,b.A)(A,[["render",L],["__scopeId","data-v-14784299"]]);var j=O,M={name:"App",components:{GoogleMap:k,Header:x,Footer:j},setup(){const e=(0,d.KR)(!1);return(0,a.sV)((()=>{setTimeout((()=>{e.value=!0}),2e3)})),{appLoaded:e}}};const z=(0,b.A)(M,[["render",u],["__scopeId","data-v-3cdf739c"]]);var $=z;const B=(0,o.Ef)($);B.mount("#app")}},n={};function t(o){var a=n[o];if(void 0!==a)return a.exports;var r=n[o]={exports:{}};return e[o].call(r.exports,r,r.exports,t),r.exports}t.m=e,function(){var e=[];t.O=function(n,o,a,r){if(!o){var i=1/0;for(u=0;u<e.length;u++){o=e[u][0],a=e[u][1],r=e[u][2];for(var s=!0,l=0;l<o.length;l++)(!1&r||i>=r)&&Object.keys(t.O).every((function(e){return t.O[e](o[l])}))?o.splice(l--,1):(s=!1,r<i&&(i=r));if(s){e.splice(u--,1);var c=a();void 0!==c&&(n=c)}}return n}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[o,a,r]}}(),function(){t.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(n,{a:n}),n}}(),function(){t.d=function(e,n){for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}}(),function(){var e={524:0};t.O.j=function(n){return 0===e[n]};var n=function(n,o){var a,r,i=o[0],s=o[1],l=o[2],c=0;if(i.some((function(n){return 0!==e[n]}))){for(a in s)t.o(s,a)&&(t.m[a]=s[a]);if(l)var u=l(t)}for(n&&n(o);c<i.length;c++)r=i[c],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(u)},o=self["webpackChunkgoogle_maps_vue"]=self["webpackChunkgoogle_maps_vue"]||[];o.forEach(n.bind(null,0)),o.push=n.bind(null,o.push.bind(o))}();var o=t.O(void 0,[504],(function(){return t(666)}));o=t.O(o)})();
//# sourceMappingURL=app.5ff583be.js.map